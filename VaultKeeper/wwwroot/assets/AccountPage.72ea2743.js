import{A as n,v as g,k as _,a as p,l as c,_ as P,P as b}from"./index.70b0ca1f.js";import{C as I,D as A,c as r,M as f,a as u,o as a,b as d,d as t,t as v,l as k,F as y,q as V,E as B,p as R,i as h,e as C}from"./vendor.2a972c33.js";import{r as T}from"./ResetService.6fdd23e1.js";class E{async getProfileDetails(e){const l=await this.GetProfileById(e),s=await this.GetKeepsByProfileId(e),w=await this.GetVaultsByProfileId(e);n.activeUser=l,n.keeps=s,n.vaults=w,g.sort("mostRecent"),_.sort("mostRecent")}async GetProfileById(e){const l=await p.get(`api/profiles/${e}`);return c.log("Profile Gotten",l.data),l.data}async GetKeepsByProfileId(e){const l=await p.get(`api/profiles/${e}/keeps`);return c.log("Keeps",l.data),l.data}async GetVaultsByProfileId(e){const l=await p.get(`api/profiles/${e}/vaults`);return c.log("vaults",l.data),l.data}}const G=new E;const M={name:"Account",setup(){const i=I();return A(async()=>{try{n.loading=!0,await T.ResetEverything(),await G.getProfileDetails(i.params.accountId),n.loading=!1}catch(e){b.toast(e.message,"error"),c.error(e.message)}}),{route:i,user:r(()=>n.account),account:r(()=>n.activeUser),keeps:r(()=>n.keeps),vaults:r(()=>n.vaults),loading:r(()=>n.loading),async sortVaults(e){await g.sort(e)},async sortKeeps(e){await _.sort(e)},CreateVault(){f.getOrCreateInstance(document.getElementById("CreateVault")).toggle()},CreateKeep(){f.getOrCreateInstance(document.getElementById("CreateKeep")).toggle()},ScrollToVaults(){document.getElementById("vaults").scrollIntoView({behavior:"smooth"})},ScrollToKeeps(){document.getElementById("keeps").scrollIntoView({behavior:"smooth"})}}}},m=i=>(R("data-v-e409f7d0"),i=i(),h(),i),j={key:0,class:"Account-Page"},Z={class:"row"},L={class:"col-12"},D={class:"container-fluid ms-2 mt-4"},O={class:"d-flex justify-content-start align-items-center"},N=["src"],z={class:"info"},F={class:"name"},U={class:"row mt-5 ms-2"},q={class:"col-12",id:"vaults"},H={class:"d-flex justify-content-between align-itmes-center mb-2"},J={class:"d-flex align-items-center"},Q=m(()=>t("div",{class:"card-titles"},"Vaults",-1)),W=m(()=>t("button",{class:"btn btn-secondary elevation-2 ms-2 text-shadow dropdown-toggle",title:"Sort the order of Vaults",id:"sort","data-bs-toggle":"dropdown"}," Sort ",-1)),X={class:"dropdown-menu"},Y={class:"row m-0"},$={class:"row ms-2 mt-3"},tt={class:"col-12",id:"keeps"},et={class:"d-flex justify-content-between align-itmes-center mb-2"},st={class:"d-flex align-items-center"},ot=m(()=>t("div",{class:"card-titles"},"Keeps",-1)),lt=m(()=>t("button",{class:"btn btn-secondary elevation-2 ms-2 text-shadow dropdown-toggle",title:"Sort the order of Vaults",id:"sort","data-bs-toggle":"dropdown"}," Sort ",-1)),nt={class:"dropdown-menu"},it={class:"row m-0"},at={class:"col-12"},dt={class:"container-masonry"};function rt(i,e,l,s,w,ct){const K=u("Vault"),x=u("Keep"),S=u("Loading");return s.loading?(a(),B(S,{key:1})):(a(),d("div",j,[t("div",Z,[t("div",L,[t("div",D,[t("div",O,[t("img",{src:s.account.picture,class:"elevation-2 me-3 profile-pic",alt:"Profile Picture"},null,8,N),t("div",z,[t("div",F,v(s.account.name),1),t("div",{class:"stats action",title:"Scroll to Keeps",onClick:e[0]||(e[0]=o=>s.ScrollToKeeps())}," Keeps: "+v(s.keeps.length),1),t("div",{class:"stats action",title:"Scroll to Vaults",onClick:e[1]||(e[1]=o=>s.ScrollToVaults())}," Vaults: "+v(s.vaults.length),1)])])])])]),t("div",U,[t("div",q,[t("div",H,[t("div",J,[Q,s.user.id==s.account.id?(a(),d("div",{key:0,class:"action plus ms-2",title:"Create A Vault",onClick:e[2]||(e[2]=o=>s.CreateVault())}," + ")):k("",!0)]),t("div",null,[W,t("ul",X,[t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[3]||(e[3]=o=>s.sortVaults("oldest"))},"Oldest")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[4]||(e[4]=o=>s.sortVaults("mostRecent"))},"Most Recent")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[5]||(e[5]=o=>s.sortVaults("aToZ"))},"A-Z")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[6]||(e[6]=o=>s.sortVaults("zToA"))},"Z-A")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[7]||(e[7]=o=>s.sortVaults("private"))},"Private")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[8]||(e[8]=o=>s.sortVaults("public"))},"Public")])])])]),t("div",Y,[(a(!0),d(y,null,V(s.vaults,o=>(a(),d("div",{class:"col-md-2 col-sm-1 col-lg-2",key:o.id},[C(K,{vault:o},null,8,["vault"])]))),128))])])]),t("div",$,[t("div",tt,[t("div",et,[t("div",st,[ot,s.user.id==s.account.id?(a(),d("div",{key:0,class:"action plus ms-2",title:"Create A Keep",onClick:e[9]||(e[9]=o=>s.CreateKeep())}," + ")):k("",!0)]),t("div",null,[lt,t("ul",nt,[t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[10]||(e[10]=o=>s.sortKeeps("oldest"))},"Oldest")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[11]||(e[11]=o=>s.sortKeeps("mostRecent"))},"Most Recent")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[12]||(e[12]=o=>s.sortKeeps("aToZ"))},"A-Z")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[13]||(e[13]=o=>s.sortKeeps("zToA"))},"Z-A")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[14]||(e[14]=o=>s.sortKeeps("mostViews"))},"Most Views")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[15]||(e[15]=o=>s.sortKeeps("leastViews"))},"Least Views")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[16]||(e[16]=o=>s.sortKeeps("mostKeeps"))},"Most Keeps")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:e[17]||(e[17]=o=>s.sortKeeps("leastKeeps"))},"Least Keeps")])])])])]),t("div",it,[t("div",at,[t("div",dt,[(a(!0),d(y,null,V(s.keeps,o=>(a(),d("figure",{key:o.id},[C(x,{keep:o},null,8,["keep"])]))),128))])])])])]))}var vt=P(M,[["render",rt],["__scopeId","data-v-e409f7d0"]]);export{vt as default};
